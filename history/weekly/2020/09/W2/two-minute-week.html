
<!doctype html>
<html>
  <head>
    <meta charset=utf-8>
    <title>Future of Coding History</title>
    <link rel="stylesheet" href="https://marianoguerra.github.io/future-of-coding-weekly/history/style.css">
  </head>
  <body>
    <div id="ui">
      <a id="logo" href="https://futureofcoding.org">
        <img src="https://marianoguerra.github.io/future-of-coding-weekly/history/logo.svg" alt="Future of Coding History">
      </a>
      <div id="small-logo">
        <a href="https://futureofcoding.org">Future of Coding</a> History
      </div>
      <div id="center">
        <h4>
          You are viewing archived messages.<br>
          Go <a href="https://marianoguerra.github.io/future-of-coding-weekly/history">here</a> to search the history.
        </h4>
      </div>
      <div id="actions"></div>
    </div>
    <div id="msgs-output">
<div id="2020-09-07T14:08:13.018Z" class="post"><span class="user">Chris Maughan</span> <a href="#2020-09-07T14:08:13.018Z" class="date">2020-09-07 14:08:13</a> <div class="message"><p>In a slow couple of weeks, I've been mostly working on fixes and stability of the text editor.  In the video I cover some ongoing work to improve UI/Widgets.  On the Synthesizer side, I've been working on performance issues and continuing my implementation of the Ixi music language; I'll do an update on that when it is in a better state!</p>
<p><a href="https://youtu.be/TD1YYlQEO-0"></a><a href="https://youtu.be/TD1YYlQEO-0">https://youtu.be/TD1YYlQEO-0</a></p>
</div> <div class="attachments"><blockquote><p>🎥 <a href="https://youtu.be/TD1YYlQEO-0">Future Of Code - Update 15</a></p>
</blockquote>
</div> <div class="files"></div> <div class="replies"><div id="2020-09-07T14:09:39.019Z" class="reply"><span class="user">Chris Maughan</span> <a href="#2020-09-07T14:09:39.019Z" class="date">2020-09-07 14:09:39</a> <div class="message"><p>There's a longer video about Zep here; it gives a more general overview.  I made it to give visitors to the github page a better idea of how it works: <a href="https://youtu.be/T_Kn9VzD3RE"></a><a href="https://youtu.be/T_Kn9VzD3RE">https://youtu.be/T_Kn9VzD3RE</a></p>
</div> <div class="attachments"><blockquote><p>🎥 <a href="https://youtu.be/T_Kn9VzD3RE">Zep Overview</a></p>
</blockquote>
</div> <div class="files"></div></div><div id="2020-09-07T14:32:58.019Z" class="reply"><span class="user">Kartik Agaram</span> <a href="#2020-09-07T14:32:58.019Z" class="date">2020-09-07 14:32:58</a> <div class="message"><p>Where's the GitHub page?!</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-07T14:36:51.019Z" class="reply"><span class="user">Chris Maughan</span> <a href="#2020-09-07T14:36:51.019Z" class="date">2020-09-07 14:36:51</a> <div class="message"><p><a href="https://github.com/cmaughan/zep"></a><a href="https://github.com/cmaughan/zep">https://github.com/cmaughan/zep</a></p>
</div> <div class="attachments"><blockquote><p>🔗 <a href="https://github.com/cmaughan/zep">cmaughan/zep</a></p>
</blockquote>
</div> <div class="files"></div></div><div id="2020-09-07T14:37:41.020Z" class="reply"><span class="user">Chris Maughan</span> <a href="#2020-09-07T14:37:41.020Z" class="date">2020-09-07 14:37:41</a> <div class="message"><p>It's also linked back from the above video.</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-07T14:50:32.020Z" class="reply"><span class="user">Kartik Agaram</span> <a href="#2020-09-07T14:50:32.020Z" class="date">2020-09-07 14:50:32</a> <div class="message"><p>Ah, I only checked the first video page. I see it now.</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-07T16:50:44.020Z" class="reply"><span class="user">Kartik Agaram</span> <a href="#2020-09-07T16:50:44.020Z" class="date">2020-09-07 16:50:44</a> <div class="message"><p>Both videos are really cool.</p>
<p>You mentioned unit tests. How do you write tests for an app with so much interaction?</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-07T17:56:03.020Z" class="reply"><span class="user">Chris Maughan</span> <a href="#2020-09-07T17:56:03.020Z" class="date">2020-09-07 17:56:03</a> <div class="message"><p>Thanks 🙂 Take a look here for unit test examples (particularly the bottom part of the file): <a href="https://github.com/cmaughan/zep/blob/master/src/tests/mode_vim.test.cpp"></a><a href="https://github.com/cmaughan/zep/blob/master/src/tests/mode_vim.test.cpp">https://github.com/cmaughan/zep/blob/master/src/tests/mode_vim.test.cpp</a></p>
<p>Essentially, each unit test here is setting up the text buffer, then running a keyboard sequence against it, and testing the output.  Since I test every editor command, it is really easy to refactor things because I have a high feeling of confidence that I didn't break stuff (and usually minor changes break at least one or two tests!)</p>
<p>That's for Vim.  I have tests for 'Standard' mode (like notepad, etc.); but TBH that needs fleshing out a bit more since I am more focused on Vim mode.</p>
<p>The harder things to test are window management, etc.  I have a Regression command which I used to test splits and tabs, for example.  Checking other higher level things like file save/load, etc. are things I need to add tests for.  But I'm a great believer in using testing when it makes sense, but not going overboard.   This particular project is a great example of how unit tests are essential, but I don't always use them.</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-07T17:56:15.021Z" class="reply"><span class="user">Chris Maughan</span> <a href="#2020-09-07T17:56:15.021Z" class="date">2020-09-07 17:56:15</a> <div class="message"><p>Regression test for splits:</p>
</div> <div class="attachments"></div> <div class="files"><blockquote><p>🎥 <a href="https://files.slack.com/files-pri/T5TCAFTA9-F01AE45NES0/regress.mp4">regress.mp4</a></p>
</blockquote>
</div></div><div id="2020-09-07T17:58:42.021Z" class="reply"><span class="user">Kartik Agaram</span> <a href="#2020-09-07T17:58:42.021Z" class="date">2020-09-07 17:58:42</a> <div class="message"><p>Most interesting. How do the tests verify things after performing operations on the live editor? Are they looking at specific locations on the screen or something like that?</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-07T18:02:49.021Z" class="reply"><span class="user">Chris Maughan</span> <a href="#2020-09-07T18:02:49.021Z" class="date">2020-09-07 18:02:49</a> <div class="message"><p>No, I think that's where testing would have to resort to visual diffs of screenshots.  That kind of testing is much harder, and becomes tedious as you 'remaster' your screenshots when the visual look changes.</p>
<p>My tests here are effectively validating that the character buffer is changed correctly.  I'm not confirming that the displayed pixels are the same.  But if I needed that, I'd probably have to automate screen grabbing and compare, or use an external tool.</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-07T18:06:29.022Z" class="reply"><span class="user">Chris Maughan</span> <a href="#2020-09-07T18:06:29.022Z" class="date">2020-09-07 18:06:29</a> <div class="message"><p>(I'd probably build such functionality into the ZRegress command I use above, and have a mode where it captured screenshots and a mode where it compared them).  But it's a question of priorities....  I'd have given up ages ago if I didn't have the command tests; because they are what keep the editor functioning correctly after my changes.  And I religiously add a new test when I find an edit problem; I like that it becomes more robust over time.</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-07T18:09:02.022Z" class="reply"><span class="user">Chris Maughan</span> <a href="#2020-09-07T18:09:02.022Z" class="date">2020-09-07 18:09:02</a> <div class="message"><p>I recently added support for UTF8 (still not fully tested/finished).  In order to do it I had to change many fundamental things, including making an iterator that could walk the editor in utf8 'code points' (i.e. 1-4 bytes per char).  I just hacked in all the changes fearlessly and fixed it until the tests passed 😉  I doubt I would have attempted it without that security blanket.</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-07T18:13:04.022Z" class="reply"><span class="user">Kartik Agaram</span> <a href="#2020-09-07T18:13:04.022Z" class="date">2020-09-07 18:13:04</a> <div class="message"><p>I see. Yeah, I agree you don't need to compare pixels here. I have a different issue: if you're driving the screen when you only care about the in-memory buffer, that feels "smelly" to me. Your tests are running code they don't need, which I worry will make them more brittle over time. I'll share a demo soon that shows an alternative, so that this is more than just another random internet comment.</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-07T18:15:51.022Z" class="reply"><span class="user">Chris Maughan</span> <a href="#2020-09-07T18:15:51.022Z" class="date">2020-09-07 18:15:51</a> <div class="message"><p>Oh, I'm not driving the screen while running the command tests; at least not the way you imply with the picture displaying each test.  The tests are just run from the command line.  The video above is the higher level regression test for windows.  The command tests are just running in the background (in fact in Visual C they are running automatically after every compile, in the background).</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-07T18:18:23.023Z" class="reply"><span class="user">Kartik Agaram</span> <a href="#2020-09-07T18:18:23.023Z" class="date">2020-09-07 18:18:23</a> <div class="message"><p>Oh. Can you elaborate on what exactly is being checked in the higher-level regression test pictured?</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-07T18:18:42.023Z" class="reply"><span class="user">Chris Maughan</span> <a href="#2020-09-07T18:18:42.023Z" class="date">2020-09-07 18:18:42</a> <div class="message"><p>I do have the concept of a 'Dummy Display' for the command tests.  This is because Zep wraps its lines 'terminal' style.  And some vim commands behave differently on wrapped lines.  So there is a dummy display which represents the visual area that the buffer is being displayed on.</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-07T18:20:59.023Z" class="reply"><span class="user">Chris Maughan</span> <a href="#2020-09-07T18:20:59.023Z" class="date">2020-09-07 18:20:59</a> <div class="message"><p>Yeah, so the ZRegress video is basically running a sequence of commands to create window and tab splits.  Since managing splits I found tricky.  It does a lot of random splits and makes sure that everything is internally self consistent.  I showed it really to demonstrate how I test higher level things (or would approach them).  Really, the video is showing 'Integration Testing' vs 'Unit Testing'.  But in all fairness I have mostly unit tests currently.</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-07T18:22:03.023Z" class="reply"><span class="user">Kartik Agaram</span> <a href="#2020-09-07T18:22:03.023Z" class="date">2020-09-07 18:22:03</a> <div class="message"><p>I'm still curious what exactly the integration tests check on window and tab splits. If they're driving the screen, are they checking screen pixels? Or just that the program doesn't crash?</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-07T18:24:20.024Z" class="reply"><span class="user">Chris Maughan</span> <a href="#2020-09-07T18:24:20.024Z" class="date">2020-09-07 18:24:20</a> <div class="message"><p>Yes, mostly that it doesn't crash.  At one point I had a bug where I'd get an empty split, or a hanging tab with nothing in it; which in the design is not allowed and will inevitably lead to a crash eventually, or at the least some confusing behavior.  But it was hard to reproduce.  So I wrote this test.  I intend to make it do more things; perhaps even testing screen output at some point, but only if I really need it.</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-07T18:24:54.024Z" class="reply"><span class="user">Kartik Agaram</span> <a href="#2020-09-07T18:24:54.024Z" class="date">2020-09-07 18:24:54</a> <div class="message"><p>Ok, that makes sense now. Thank you!</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-07T18:25:11.024Z" class="reply"><span class="user">Chris Maughan</span> <a href="#2020-09-07T18:25:11.024Z" class="date">2020-09-07 18:25:11</a> <div class="message"><p>No problem 🙂</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-07T18:27:33.024Z" class="reply"><span class="user">Kartik Agaram</span> <a href="#2020-09-07T18:27:33.024Z" class="date">2020-09-07 18:27:33</a> <div class="message"><p>Could you point me at the dummy display in your codebase? I'm curious to compare and contrast with how I do it 🙂</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-07T18:28:02.024Z" class="reply"><span class="user">Chris Maughan</span> <a href="#2020-09-07T18:28:02.024Z" class="date">2020-09-07 18:28:02</a> <div class="message"><p>Oh, one more thought - the window.cpp code is the code I'm least happy with; I'm actually refactoring it slowly.  It does all the nasty work of displaying the wrapped buffer, and handling display of all the markers, syntax, etc.</p>
<p>Part of the reason for that is, surprise, that it is hard to test.  Part of it is that a lot of complexity exists in that domain.</p>
<p>Managing the buffer is somewhat easier.  The bottom level structure is a Gap Buffer which has its own unit tests.  Then a command layer is the only thing that can modify the buffer, etc.  But window/display stuff is hard.  And easy to break 🙂</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-07T18:28:48.025Z" class="reply"><span class="user">Kartik Agaram</span> <a href="#2020-09-07T18:28:48.025Z" class="date">2020-09-07 18:28:48</a> <div class="message"><p>That's kinda the focus of my stuff: to make the hard stuff easy at as low a level as possible.</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-07T18:29:34.025Z" class="reply"><span class="user">Chris Maughan</span> <a href="#2020-09-07T18:29:34.025Z" class="date">2020-09-07 18:29:34</a> <div class="message"><p>Sure, Dummy display:</p>
<p><a href="https://github.com/cmaughan/zep/blob/79bc43cc2906e3cce7853f6739b7c5cad6dcaf95/include/zep/display.h#L60"></a><a href="https://github.com/cmaughan/zep/blob/79bc43cc2906e3cce7853f6739b7c5cad6dcaf95/include/zep/display.h#L60">https://github.com/cmaughan/zep/blob/79bc43cc2906e3cce7853f6739b7c5cad6dcaf95/include/zep/display.h#L60</a></p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-07T18:30:34.025Z" class="reply"><span class="user">Chris Maughan</span> <a href="#2020-09-07T18:30:34.025Z" class="date">2020-09-07 18:30:34</a> <div class="message"><p>To give context, Zep creates 2 concrete ZepDisplay classes; one for ImGui (OpenGL) and one for Qt.  These 5 functions are what's required to draw the editor on a new display</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-07T18:31:34.025Z" class="reply"><span class="user">Chris Maughan</span> <a href="#2020-09-07T18:31:34.025Z" class="date">2020-09-07 18:31:34</a> <div class="message"><p>The Null is just returning a dummy text size which is '1' unit per char requested.</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-07T18:36:16.026Z" class="reply"><span class="user">Chris Maughan</span> <a href="#2020-09-07T18:36:16.026Z" class="date">2020-09-07 18:36:16</a> <div class="message"><p>In truth there are 2 abstractions; the Display abstraction is for rendering, but there is also an Editor abstraction; that's to handle system-specific keyboard input.</p>
</div> <div class="attachments"></div> <div class="files"></div></div></div></div><div id="2020-09-10T12:22:22.028Z" class="post"><span class="user">Mariano Guerra</span> <a href="#2020-09-10T12:22:22.028Z" class="date">2020-09-10 12:22:22</a> <div class="message"><p>This week I've been working mostly on a new cell type called "Resource", the first use is to manage images, but will be extended to videos and generic file attachments in the future: <a href="https://youtu.be/LZIHVitvZ68"></a><a href="https://youtu.be/LZIHVitvZ68">https://youtu.be/LZIHVitvZ68</a></p>
</div> <div class="attachments"><blockquote><p>🎥 <a href="https://youtu.be/LZIHVitvZ68">Instadeq this Week: Resource Cell for Images</a></p>
</blockquote>
</div> <div class="files"></div> <div class="replies"></div></div><div id="2020-09-13T13:01:12.034Z" class="post"><span class="user">Maikel van de Lisdonk</span> <a href="#2020-09-13T13:01:12.034Z" class="date">2020-09-13 13:01:12</a> <div class="message"><p>Hi, in this video I show some new features that I didn't show yet or that just took some more time. To summarize: a new flow-type, extandable and configurable node UI, expression engine and a  new spreadsheet node. I hope you enjoy😊! <a href="https://youtu.be/RQHtsmttvV0"></a><a href="https://youtu.be/RQHtsmttvV0">https://youtu.be/RQHtsmttvV0</a></p>
</div> <div class="attachments"><blockquote><p>🎥 <a href="https://youtu.be/RQHtsmttvV0">Flow based programming video 6</a></p>
</blockquote>
</div> <div class="files"></div> <div class="replies"><div id="2020-09-13T13:12:19.038Z" class="reply"><span class="user">Maikel van de Lisdonk</span> <a href="#2020-09-13T13:12:19.038Z" class="date">2020-09-13 13:12:19</a> <div class="message"><p>In mention the expression engine that I used to use, that is the npm package Jexl. This is probably not clear from the video. I now build my own because I wanted more control and it misses some features that are needed in combination with the spreadsheet node to handle the correct order of executing the formulas</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2020-09-13T18:05:41.038Z" class="reply"><span class="user">larry</span> <a href="#2020-09-13T18:05:41.038Z" class="date">2020-09-13 18:05:41</a> <div class="message"><p>👍</p>
</div> <div class="attachments"></div> <div class="files"></div></div></div></div>
    </div>
  </body>
</html>
